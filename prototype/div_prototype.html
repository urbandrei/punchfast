<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Overlapping Trapezoids</title>
    <style>
        /* Define a custom property so we can animate the scale variable smoothly */
        @property --scale-factor {
            syntax: '<number>';
            inherits: true;
            initial-value: 1;
        }

        /* CONFIGURATION SECTION */
        :root {
            /* --- DIMENSIONS --- */
            --width: 250px;
            --height: 200px;
            
            /* --- GEOMETRY BASES (Will be animated) --- */
            --perspective: 600px;
            --rotate-x-base: 20deg;   
            --rotate-z-base: -2deg;   
            
            /* --- CORNER RADII BASES --- */
            --r1: 40px; 
            --r2: 35px; 
            --r3: 35px; 
            --r4: 45px; 

            /* --- OFFSET VARIABLES (Will be animated) --- */
            --pos-diff: 3px;          
            --rot-diff: 1.5deg;       
            --rad-diff: 2px;
            
            /* --- ANIMATION VARIABLE --- */
            --scale-factor: 1;
            
            /* --- COLORS --- */
            --base-hue: 186;          
            --base-sat: 80%;
            --base-light: 45%;
        }

        body {
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
            background-color: #1a1a1a;
            overflow: hidden;
            font-family: sans-serif;
        }

        .canvas {
            position: relative;
            width: 500px;
            height: 500px;
            display: flex;
            justify-content: center;
            align-items: center;
            cursor: pointer; /* Indication that it's interactive */
        }

        .shape {
            position: absolute;
            width: var(--width);
            height: var(--height);
            mix-blend-mode: screen; 
            box-shadow: 0 10px 30px rgba(0,0,0,0.5);
            /* Transition for color/radius, but NOT transform (handled by JS + Animation) */
            transition: border-radius 0.2s ease, background 0.2s ease;
        }

        /* --- SHAPE 1 --- */
        .shape-1 {
            background: linear-gradient(135deg, 
                hsla(var(--base-hue), var(--base-sat), var(--base-light), 0.9), 
                hsla(var(--base-hue), var(--base-sat), 60%, 0.8)
            );
            
            border-radius: var(--r1) var(--r2) var(--r3) var(--r4);
            
            /* Added scale(var(--scale-factor)) at the end */
            transform: 
                translate(calc(var(--pos-diff) * -1), calc(var(--pos-diff) * -1)) 
                rotateZ(var(--rotate-z-base)) 
                perspective(var(--perspective)) 
                rotateX(var(--rotate-x-base))
                scale(var(--scale-factor));
            
            z-index: 1;
        }

        /* --- SHAPE 2 --- */
        .shape-2 {
            background: linear-gradient(135deg, 
                hsla(calc(var(--base-hue) + 5), var(--base-sat), calc(var(--base-light) - 5%), 0.9), 
                hsla(calc(var(--base-hue) + 5), var(--base-sat), 55%, 0.85)
            );
            
            border-radius: 
                calc(var(--r1) + var(--rad-diff)) 
                calc(var(--r2) - var(--rad-diff)) 
                calc(var(--r3) + var(--rad-diff)) 
                calc(var(--r4) - var(--rad-diff));
            
            /* Added scale(var(--scale-factor)) at the end */
            transform: 
                translate(var(--pos-diff), var(--pos-diff)) 
                rotateZ(calc(var(--rotate-z-base) + var(--rot-diff))) 
                perspective(var(--perspective)) 
                rotateX(calc(var(--rotate-x-base) - 2deg))
                scale(var(--scale-factor));
            
            z-index: 2;
        }

        /* --- BOUNCE ANIMATION --- */
        @keyframes bounce-scale {
            0% { --scale-factor: 1; }
            40% { --scale-factor: 1.15; } /* Grow larger */
            75% { --scale-factor: 0.95; } /* Slight undershoot */
            100% { --scale-factor: 1; }   /* Return to normal */
        }

        /* Trigger animation on hover */
        .canvas:hover .shape {
            /* 0.6s duration
               cubic-bezier gives it a springy feel
               forwards ensures it doesn't snap weirdly if interrupted (though keyframe end is 1 anyway)
            */
            animation: bounce-scale 0.7s cubic-bezier(0.34, 1.56, 0.64, 1);
        }

        .label {
            position: absolute;
            bottom: 20px;
            color: #555;
            font-size: 0.9rem;
            letter-spacing: 1px;
            pointer-events: none;
        }
    </style>
</head>
<body>

    <div class="canvas">
        <div class="shape shape-1"></div>
        <div class="shape shape-2"></div>
    </div>
    
    <div class="label">Hover to Bounce</div>

    <script>
        // Animation Loop
        // We will update the CSS Custom Properties based on Sine waves with different frequencies.
        
        const root = document.documentElement;
        let time = 0;

        function animate() {
            time += 0.01; // Speed of time

            // 1. Base Rotation (Global wobble)
            // Slow, wide swing
            const rotX = 20 + Math.sin(time * 0.5) * 5; 
            const rotZ = -2 + Math.cos(time * 0.3) * 3;

            // 2. Offsets (The "Breathing" between shapes)
            // Faster, smaller fluctuations
            // Using prime number multipliers (0.7, 1.1, 1.3) ensures they don't sync up often.
            
            // Position Difference: fluctuate between 2px and 8px
            const posDiff = 5 + Math.sin(time * 0.7) * 3; 

            // Rotation Difference: fluctuate between 1deg and 3deg
            const rotDiff = 2 + Math.cos(time * 1.1) * 1;

            // Radius Difference: fluctuate between 0px and 6px
            const radDiff = 3 + Math.sin(time * 1.3) * 3;

            // 3. Apply to CSS
            root.style.setProperty('--rotate-x-base', `${rotX}deg`);
            root.style.setProperty('--rotate-z-base', `${rotZ}deg`);
            root.style.setProperty('--pos-diff', `${posDiff}px`);
            root.style.setProperty('--rot-diff', `${rotDiff}deg`);
            root.style.setProperty('--rad-diff', `${radDiff}px`);

            requestAnimationFrame(animate);
        }

        // Start the loop
        animate();
    </script>

</body>
</html>